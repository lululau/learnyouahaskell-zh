<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2019-12-12 四 13:31 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>从零开始</title>
<meta name="generator" content="Org mode">
<meta name="author" content="刘向">
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://assets.hackit.fun/style/org/spacemacs-wide/htmlize.css"/>
 <script src="http://assets.hackit.fun/js/org/spacemacs-wide/jquery.min.js"></script>
 <script src="http://assets.hackit.fun/js/org/spacemacs-wide/bootstrap.min.js"></script>
 <script src="http://assets.hackit.fun/js/org/spacemacs-wide/readtheorg.js"></script>
 <link rel="stylesheet" type="text/css" href="http://assets.hackit.fun/style/org/spacemacs-wide/readtheorg.css"/>
 <link rel="stylesheet" type="text/css" href="http://assets.hackit.fun/style/org/spacemacs-wide/font-awesome.min.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">从零开始</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orga272909">1. 从零开始</a>
<ul>
<li><a href="#org7c19700">1.1. 准备好了吗？</a></li>
<li><a href="#org633b7ab">1.2. 初学者的第一个函数</a></li>
<li><a href="#org5ef2b6f">1.3. List 入门</a></li>
<li><a href="#orga91ba72">1.4. 使用 Range</a></li>
<li><a href="#org822e13b">1.5. List Comprehension</a></li>
<li><a href="#orgba2eb3b">1.6. Tuple</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orga272909" class="outline-2">
<h2 id="orga272909"><span class="section-number-2">1</span> 从零开始</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org7c19700" class="outline-3">
<h3 id="org7c19700"><span class="section-number-3">1.1</span> 准备好了吗？</h3>
<div class="outline-text-3" id="text-1-1">

<div class="figure">
<p><img src="startingout.png" alt="startingout.png">
</p>
</div>

<p>
准备来开始我们的旅程！如果你就是那种从不看说明书的人，我推荐你还是回头看一下简介的最后一节。那里面讲了这个教学中你需要用到的工具及基本用法。我们首先要做的就是进入ghc 的交互模式，接着就可以写几个函数体验一下 Haskell了。打开终端机，输入 =ghci=，你会看到下列欢迎消息：
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #ce537a; font-weight: bold;">GHCi</span>, version <span style="color: #a45bad;">6.8</span><span style="color: #7590db;">.</span><span style="color: #a45bad;">2</span><span style="color: #ce537a; font-weight: bold;">:</span> http<span style="color: #ce537a; font-weight: bold;">://</span>www<span style="color: #7590db;">.</span>haskell<span style="color: #7590db;">.</span>org<span style="color: #7590db;">/</span>ghc<span style="color: #7590db;">/</span>
<span style="color: #ce537a; font-weight: bold;">:?</span> for help  <span style="color: #ce537a; font-weight: bold;">Loading</span> package base <span style="color: #7590db;">...</span> linking <span style="color: #7590db;">...</span> done<span style="color: #7590db;">.</span>
<span style="color: #ce537a; font-weight: bold;">Prelude</span><span style="color: #bc6ec5; font-weight: bold;">&gt;</span>
</pre>
</div>

<p>
恭喜您已经进入了 ghci 了！目前它的命令行提示是 <code>prelude&gt;</code> ，不过它在你装载一些模块之后会变的比较长。为了美观起见，我们会输入指令 <code>:set prompt "ghci&gt; "​</code>  把它改成 <code>ghci&gt;</code> 。
</p>

<p>
首先来看一些简单的运算
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #a45bad;">2</span> <span style="color: #7590db;">+</span> <span style="color: #a45bad;">15</span>
<span style="color: #a45bad;">17</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #a45bad;">49</span> <span style="color: #7590db;">*</span> <span style="color: #a45bad;">100</span>
<span style="color: #a45bad;">4900</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #a45bad;">1892</span> <span style="color: #7590db;">-</span> <span style="color: #a45bad;">1472</span>
<span style="color: #a45bad;">420</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #a45bad;">5</span> <span style="color: #7590db;">/</span> <span style="color: #a45bad;">2</span>
<span style="color: #a45bad;">2.5</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span>
</pre>
</div>

<p>
很简单吧！你也可以在一行中使用多个运算子，他们会按照运算子优先级执行计算，而使用括号可以改变执行的优先级。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">(</span><span style="color: #a45bad;">50</span> <span style="color: #7590db;">*</span> <span style="color: #a45bad;">100</span><span style="color: #4f97d7;">)</span> <span style="color: #7590db;">-</span> <span style="color: #a45bad;">4999</span>
<span style="color: #a45bad;">1</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #a45bad;">50</span> <span style="color: #7590db;">*</span> <span style="color: #a45bad;">100</span> <span style="color: #7590db;">-</span> <span style="color: #a45bad;">4999</span>
<span style="color: #a45bad;">1</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #a45bad;">50</span> <span style="color: #7590db;">*</span> <span style="color: #4f97d7;">(</span><span style="color: #a45bad;">100</span> <span style="color: #7590db;">-</span> <span style="color: #a45bad;">4999</span><span style="color: #4f97d7;">)</span>
<span style="color: #7590db;">-</span><span style="color: #a45bad;">244950</span>
</pre>
</div>

<p>
但注意处理负数的时候有个小陷阱：我们执行 <code>5 * -3</code> 会 ghci会回报错误。所以说，使用负数时最好将其置于括号之中，像  <code>5*(-3)</code> 就不会有问题。
</p>

<p>
要进行布林代数 (Boolean Algebra)的演算也是很直觉的。你也许早就会猜， <code>&amp;&amp;</code> 指的是布林代数上的 AND，而 <code>||=指的是布林代数上的 OR，=not</code> 会把 <code>True</code> 变成
<code>False=，=False</code> 变成 <code>True</code> 。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #ce537a; font-weight: bold;">True</span> <span style="color: #7590db;">&amp;&amp;</span> <span style="color: #ce537a; font-weight: bold;">False</span>
<span style="color: #ce537a; font-weight: bold;">False</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #ce537a; font-weight: bold;">True</span> <span style="color: #7590db;">&amp;&amp;</span> <span style="color: #ce537a; font-weight: bold;">True</span>
<span style="color: #ce537a; font-weight: bold;">True</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #ce537a; font-weight: bold;">False</span> <span style="color: #7590db;">||</span> <span style="color: #ce537a; font-weight: bold;">True</span>
<span style="color: #ce537a; font-weight: bold;">True</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> not <span style="color: #ce537a; font-weight: bold;">False</span>
<span style="color: #ce537a; font-weight: bold;">True</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> not <span style="color: #4f97d7;">(</span><span style="color: #ce537a; font-weight: bold;">True</span> <span style="color: #7590db;">&amp;&amp;</span> <span style="color: #ce537a; font-weight: bold;">True</span><span style="color: #4f97d7;">)</span>
<span style="color: #ce537a; font-weight: bold;">False</span>
</pre>
</div>

<p>
相等性可以这样判定
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #a45bad;">5</span> <span style="color: #7590db;">==</span> <span style="color: #a45bad;">5</span>
<span style="color: #ce537a; font-weight: bold;">True</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #a45bad;">1</span> <span style="color: #7590db;">==</span> <span style="color: #a45bad;">0</span>
<span style="color: #ce537a; font-weight: bold;">False</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #a45bad;">5</span> <span style="color: #7590db;">/=</span> <span style="color: #a45bad;">5</span>
<span style="color: #ce537a; font-weight: bold;">False</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #a45bad;">5</span> <span style="color: #7590db;">/=</span> <span style="color: #a45bad;">4</span>
<span style="color: #ce537a; font-weight: bold;">True</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #2d9574;">"hello"</span> <span style="color: #7590db;">==</span> <span style="color: #2d9574;">"hello"</span>
<span style="color: #ce537a; font-weight: bold;">True</span>
</pre>
</div>

<p>
那执行 <code>5+"llama"= 或者 =5==True</code> 会怎样？ 如果我们真的试着在 ghci中跑，会得到下列的错误消息：
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #ce537a; font-weight: bold;">No</span> <span style="color: #4f97d7; font-weight: bold;">instance</span> for <span style="color: #4f97d7;">(</span><span style="color: #ce537a; font-weight: bold;">Num</span> <span style="color: #bc6ec5;">[</span><span style="color: #ce537a; font-weight: bold;">Char</span><span style="color: #bc6ec5;">]</span><span style="color: #4f97d7;">)</span>
<span style="color: #bc6ec5; font-weight: bold;">arising</span> from a use <span style="color: #4f97d7; font-weight: bold;">of</span> `<span style="color: #7590db;">+</span><span style="color: #dc752f; background-color: #292b2e;">'</span><span style="color: #2d9574;"> at :1:0-9</span>
<span style="color: #ce537a; font-weight: bold;">Possible</span> fix<span style="color: #ce537a; font-weight: bold;">:</span> add an <span style="color: #4f97d7; font-weight: bold;">instance</span> declaration for <span style="color: #4f97d7;">(</span><span style="color: #ce537a; font-weight: bold;">Num</span> <span style="color: #bc6ec5;">[</span><span style="color: #ce537a; font-weight: bold;">Char</span><span style="color: #bc6ec5;">]</span><span style="color: #4f97d7;">)</span>
<span style="color: #ce537a; font-weight: bold;">In</span> the expression<span style="color: #ce537a; font-weight: bold;">:</span> <span style="color: #a45bad;">5</span> <span style="color: #7590db;">+</span> <span style="color: #2d9574;">"llama"</span>
<span style="color: #ce537a; font-weight: bold;">In</span> the definition <span style="color: #4f97d7; font-weight: bold;">of</span> `it'<span style="color: #ce537a; font-weight: bold;">:</span> it <span style="color: #7590db;">=</span> <span style="color: #a45bad;">5</span> <span style="color: #7590db;">+</span> <span style="color: #2d9574;">"llama"</span>
</pre>
</div>

<p>
这边 ghci 提示说 =​"llama"​= 并不是数值型别，所以它不知道该怎样才能给它加上 5。即便是 "four" 甚至是"4" 也不可以，Haskell 不拿它当数值。执行 <code>True==5</code>, ghci
就会提示型别不匹配。 <code>+</code> 运算子要求两端都是数值，而 <code>==</code> 运算子仅对两个可比较的值可用。这就要求他们的型别都必须一致，苹果和橘子就无法做比较。我们会在后面深入地理解型别的概念。Note: <code>5+4.0</code> 是可以执行的，5 既可以做被看做整数也可以被看做浮点数，但 4.0则不能被看做整数。
</p>


<div class="figure">
<p><img src="ringring.png" alt="ringring.png">
</p>
</div>

<p>
也许你并未察觉，不过从始至终我们一直都在使用函数。 <code>*</code> 就是一个将两个数相乘的函数，就像三明治一样，用两个参数将它夹在中央，这被称作中缀函数。而其他大多数不能与数夹在一起的函数则被称作前缀函数。绝大部分函数都是前缀函数，在接下来我们就不多做区别。大多数命令式编程语言中的函数调用形式通常就是函数名，括号，由逗号分隔的参数表。而在Haskell中，函数调用的形式是函数名，空格，空格分隔的参数表。简单举个例子，我们调用Haskell 中最无趣的函数：
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> succ <span style="color: #a45bad;">8</span>
<span style="color: #a45bad;">9</span>
</pre>
</div>

<p>
<code>succ</code> 函数返回一个数的后继 (successor)。而且如你所见，在 Haskell中是用空格来将函数与参数分隔的。至于调用多个参数的函数也很容易， <code>min</code> 和=max= 接受两个可比较大小的参数，并返回较大或者较小的那个数。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> min <span style="color: #a45bad;">9</span> <span style="color: #a45bad;">10</span>
<span style="color: #a45bad;">9</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> min <span style="color: #a45bad;">3.4</span> <span style="color: #a45bad;">3.2</span>
<span style="color: #a45bad;">3.2</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> max <span style="color: #a45bad;">100</span> <span style="color: #a45bad;">101</span>
<span style="color: #a45bad;">101</span>
</pre>
</div>

<p>
函数调用拥有最高的优先级，如下两句是等效的
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci <span style="color: #bc6ec5; font-weight: bold;">&gt;</span> succ <span style="color: #a45bad;">9</span> <span style="color: #7590db;">+</span> max <span style="color: #a45bad;">5</span> <span style="color: #a45bad;">4</span> <span style="color: #7590db;">+</span> <span style="color: #a45bad;">1</span>
<span style="color: #a45bad;">16</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">(</span>succ <span style="color: #a45bad;">9</span><span style="color: #4f97d7;">)</span> <span style="color: #7590db;">+</span> <span style="color: #4f97d7;">(</span>max <span style="color: #a45bad;">5</span> <span style="color: #a45bad;">4</span><span style="color: #4f97d7;">)</span> <span style="color: #7590db;">+</span> <span style="color: #a45bad;">1</span>
<span style="color: #a45bad;">16</span>
</pre>
</div>

<p>
若要取 9 乘 10 的后继， <code>succ 9*10</code> 是不行的，程序会先取 9的后继，然后再乘以
10 得 100。正确的写法应该是 <code>succ(9*10)</code> ，得91。如果某函数有两个参数，也可以用 <code>`</code> 符号将它括起，以中缀函数的形式调用它。
</p>

<p>
例如取两个整数相除所得商的 <code>div</code> 函数, <code>div 92 10</code> 可得9，但这种形式不容易理解：究竟是哪个数是除数，哪个数被除？使用中缀函数的形式 <code>92 `div` 10</code> 就更清晰了。
</p>

<p>
从命令式编程语言走过来的人们往往会觉得函数调用与括号密不可分，在 C中，调用函数必加括号，就像 <code>foo()</code>, <code>bar(1)</code>,或者 <code>baz(3,"haha")</code> 。而在Haskell 中，函数的调用使用空格，例如 <code>bar (bar 3)</code> ，它并不表示以 <code>bar</code> 和 3 两个参数去调用
<code>bar</code> ，而是以 <code>bar 3</code> 所得的结果作为参数去调用 <code>bar</code> 。在 C 中，就相当于
<code>bar(bar(3))</code> 。
</p>
</div>
</div>

<div id="outline-container-org633b7ab" class="outline-3">
<h3 id="org633b7ab"><span class="section-number-3">1.2</span> 初学者的第一个函数</h3>
<div class="outline-text-3" id="text-1-2">
<p>
在前一节中我们简单介绍了函数的调用，现在让我们编写我们自己的函数！打开你最喜欢的编辑器，输入如下代码，它的功能就是将一个数字乘以2。
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #bc6ec5; font-weight: bold;">doubleMe</span> x <span style="color: #7590db;">=</span> x <span style="color: #7590db;">+</span> x
</pre>
</div>

<p>
函数的声明与它的调用形式大致相同，都是先函数名，后跟由空格分隔的参数表。但在声明中一定要在 <code>=</code> 后面定义函数的行为。
</p>

<p>
保存为 <code>baby.hs</code> 或任意名称，然后转至保存的位置，打开 ghci，执行 <code>:l baby.hs</code>
。这样我们的函数就装载成功，可以调用了。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #ce537a; font-weight: bold;">:</span>l baby
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span> <span style="color: #4f97d7; font-weight: bold;">of</span> <span style="color: #a45bad;">1</span><span style="color: #4f97d7;">]</span> <span style="color: #ce537a; font-weight: bold;">Compiling</span> <span style="color: #ce537a; font-weight: bold;">Main</span>             <span style="color: #4f97d7;">(</span> baby<span style="color: #7590db;">.</span>hs, interpreted <span style="color: #4f97d7;">)</span>
<span style="color: #ce537a; font-weight: bold;">Ok</span>, modules loaded<span style="color: #ce537a; font-weight: bold;">:</span> Main.
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> doubleMe <span style="color: #a45bad;">9</span>
<span style="color: #a45bad;">18</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> doubleMe <span style="color: #a45bad;">8.3</span>
<span style="color: #a45bad;">16.6</span>
</pre>
</div>

<p>
<code>+</code> 运算子对整数和浮点都可用(实际上所有有数字特征的值都可以)，所以我们的函数可以处理一切数值。声明一个包含两个参数的函数如下：
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #bc6ec5; font-weight: bold;">doubleUs</span> x y <span style="color: #7590db;">=</span> x<span style="color: #7590db;">*</span><span style="color: #a45bad;">2</span> <span style="color: #7590db;">+</span> y<span style="color: #7590db;">*</span><span style="color: #a45bad;">2</span>
</pre>
</div>

<p>
很简单。将其写成 <code>doubleUs x y = x + x + y + y</code> 也可以。测试一下(记住要保存为
<code>baby.hs</code> 并到 ghci 下边执行 <code>:l baby.hs</code>)
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> doubleUs <span style="color: #a45bad;">4</span> <span style="color: #a45bad;">9</span>
<span style="color: #a45bad;">26</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> doubleUs <span style="color: #a45bad;">2.3</span> <span style="color: #a45bad;">34.2</span>
<span style="color: #a45bad;">73.0</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> doubleUs <span style="color: #a45bad;">28</span> <span style="color: #a45bad;">88</span> <span style="color: #7590db;">+</span> doubleMe <span style="color: #a45bad;">123</span>
<span style="color: #a45bad;">478</span>
</pre>
</div>

<p>
你可以在其他函数中调用你编写的函数，如此一来我们可以将 =doubleUs=函数改为：
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #bc6ec5; font-weight: bold;">doubleUs</span> x y <span style="color: #7590db;">=</span> doubleMe x <span style="color: #7590db;">+</span> doubleMe y
</pre>
</div>


<div class="figure">
<p><img src="baby.png" alt="baby.png">
</p>
</div>

<p>
这种情形在 Haskell下边十分常见：编写一些简单的函数，然后将其组合，形成一个较为复杂的函数，这样可以减少重复工作。设想若是哪天有个数学家验证说2 应该是 3，我们只需要将 <code>doubleMe</code> 改为 <code>x+x+x</code> 即可，由于 <code>doubleUs</code> 调用到 <code>doubleMe</code>
，于是整个程序便进入了 2 即是 3 的古怪世界。
</p>

<p>
Haskell 中的函数并没有顺序，所以先声明 <code>doubleUs</code> 还是先声明 <code>doubleMe</code> 都是同样的。如下，我们编写一个函数，它将小于 100 的数都乘以 2，因为大于100 的数都已经足够大了！
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #bc6ec5; font-weight: bold;">doubleSmallNumber</span> x <span style="color: #7590db;">=</span> <span style="color: #4f97d7; font-weight: bold;">if</span> x <span style="color: #7590db;">&gt;</span> <span style="color: #a45bad;">100</span>
                      <span style="color: #4f97d7; font-weight: bold;">then</span> x
                      <span style="color: #4f97d7; font-weight: bold;">else</span>  x<span style="color: #7590db;">*</span><span style="color: #a45bad;">2</span>
</pre>
</div>

<p>
接下来介绍 Haskell 的 <code>if</code> 语句。你也许会觉得和其他语言很像，不过存在一些不同。
Haskell 中 <code>if</code> 语句的 <code>else</code> 部分是不可省略。在命令式语言中，你可以通过 <code>if</code>
语句来跳过一段代码，而在 <code>Haskell</code> 中，每个函数和表达式都要返回一个结果。对于这点我觉得将 <code>if</code> 语句置于一行之中会更易理解。Haskell 中的 <code>if</code> 语句的另一个特点就是它其实是个表达式，表达式就是返回一个值的一段代码：5是个表达式，它返回
5； <code>4+8</code> 是个表达式；=x+y= 也是个表达式，它返回 <code>x+y</code> 的结果。正由于 <code>else</code>
是强制的， <code>if</code> 语句一定会返回某个值，所以说 <code>if</code> 语句也是个表达式。如果要给刚刚定义的函数的结果都加上 1，可以如此修改：
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #bc6ec5; font-weight: bold;">doubleSmallNumber'</span> x <span style="color: #7590db;">=</span> <span style="color: #4f97d7;">(</span><span style="color: #4f97d7; font-weight: bold;">if</span> x <span style="color: #7590db;">&gt;</span> <span style="color: #a45bad;">100</span> <span style="color: #4f97d7; font-weight: bold;">then</span> x <span style="color: #4f97d7; font-weight: bold;">else</span> x<span style="color: #7590db;">*</span><span style="color: #a45bad;">2</span><span style="color: #4f97d7;">)</span> <span style="color: #7590db;">+</span> <span style="color: #a45bad;">1</span>
</pre>
</div>

<p>
若是去掉括号，那就会只在小于 100 的时候加1。注意函数名最后的那个单引号，它没有任何特殊含义，只是一个函数名的合法字符罢了。通常，我们使用单引号来区分一个稍经修改但差别不大的函数。定义这样的函数也是可以的：
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #bc6ec5; font-weight: bold;">conanO'Brien</span> <span style="color: #7590db;">=</span> <span style="color: #2d9574;">"It's a-me, Conan O'Brien!"</span>
</pre>
</div>

<p>
在这里有两点需要注意。首先就是我们没有大写 =conan=的首字母，因为首字母大写的函数是不允许的，稍后我们将讨论其原因；另外就是这个函数并没有任何参数。没有参数的函数通常被称作"定义"(或者"名字")，一旦定义， <code>conanO'Brien</code> 就与字串
=​"It's a-me, Conan O'Brien!"​= 完全等价，且它的值不可以修改。
</p>
</div>
</div>

<div id="outline-container-org5ef2b6f" class="outline-3">
<h3 id="org5ef2b6f"><span class="section-number-3">1.3</span> List 入门</h3>
<div class="outline-text-3" id="text-1-3">

<div class="figure">
<p><img src="list.png" alt="list.png">
</p>
</div>

<p>
在 Haskell 中，List就像现实世界中的购物单一样重要。它是最常用的数据结构，并且十分强大，灵活地使用它可以解决很多问题。本节我们将对List，字串和 list
comprehension 有个初步了解。 在 Haskell 中，List是一种单型别的数据结构，可以用来存储多个型别相同的元素。我们可以在里面装一组数字或者一组字符，但不能把字符和数字装在一起。
</p>

<pre class="example">
*Note*: 在 ghci 下，我们可以使用 let 关键字来定义一个常量。在 ghci 下执行 let a=1 与在脚本中编写 a=1 是等价的。
</pre>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7; font-weight: bold;">let</span> lostNumbers <span style="color: #7590db;">=</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">8</span>,<span style="color: #a45bad;">15</span>,<span style="color: #a45bad;">16</span>,<span style="color: #a45bad;">23</span>,<span style="color: #a45bad;">48</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> lostNumbers
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">8</span>,<span style="color: #a45bad;">15</span>,<span style="color: #a45bad;">16</span>,<span style="color: #a45bad;">23</span>,<span style="color: #a45bad;">48</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
如你所见，一个 List 由方括号括起，其中的元素用逗号分隔开来。若试图写
<code>[1,2,'a',3,'b','c',4]</code> 这样的 List，Haskell就会报出这几个字符不是数字的错误。字串实际上就是一组字符的 List，"Hello"只是 <code>['h','e','l','l','o']</code> 的语法糖而已。所以我们可以使用处理 List的函数来对字串进行操作。 将两个 List 合并是很常见的操作，这可以通过 <code>++</code> 运算子实现。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span><span style="color: #4f97d7;">]</span> <span style="color: #7590db;">++</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">9</span>,<span style="color: #a45bad;">10</span>,<span style="color: #a45bad;">11</span>,<span style="color: #a45bad;">12</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">9</span>,<span style="color: #a45bad;">10</span>,<span style="color: #a45bad;">11</span>,<span style="color: #a45bad;">12</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #2d9574;">"hello"</span> <span style="color: #7590db;">++</span> <span style="color: #2d9574;">" "</span> <span style="color: #7590db;">++</span> <span style="color: #2d9574;">"world"</span>
<span style="color: #2d9574;">"hello world"</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #2d9574;">'w'</span>,<span style="color: #2d9574;">'o'</span><span style="color: #4f97d7;">]</span> <span style="color: #7590db;">++</span> <span style="color: #4f97d7;">[</span><span style="color: #2d9574;">'o'</span>,<span style="color: #2d9574;">'t'</span><span style="color: #4f97d7;">]</span>
<span style="color: #2d9574;">"woot"</span>
</pre>
</div>

<p>
在使用 <code>++</code> 运算子处理长字串时要格外小心(对长 List 也是同样)，Haskell会遍历整个的 List(<code>++</code> 符号左边的那个)。在处理较短的字串时问题还不大，但要是在一个
5000万长度的 List 上追加元素，那可得执行好一会儿了。所以说，用 <code>:</code> 运算子往一个 List 前端插入元素会是更好的选择。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #2d9574;">'A'</span><span style="color: #ce537a; font-weight: bold;">:</span><span style="color: #2d9574;">" SMALL CAT"</span>
<span style="color: #2d9574;">"A SMALL CAT"</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #a45bad;">5</span><span style="color: #ce537a; font-weight: bold;">:</span><span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">5</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">5</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
<code>:</code> 运算子可以连接一个元素到一个 List 或者字串之中，而 <code>++</code> 运算子则是连接两个 List。若要使用 <code>++</code> 运算子连接单个元素到一个 List之中，就用方括号把它括起使之成为单个元素的 List。 <code>[1,2,3]</code> 实际上是 <code>1:2:3:[]</code> 的语法糖。 <code>[]</code> 表示一个空 List,若要从前端插入 3，它就成了 <code>[3]</code>, 再插入 2，它就成了 <code>[2,3]</code> ，以此类推。
</p>

<pre class="example">
*Note*: [],[[]],[[],[],[]] 是不同的。第一个是一个空的 List，第二个是含有一个空 List 的 List，第三个是含有三个空 List 的 List。
</pre>

<p>
若是要按照索引取得 List 中的元素，可以使用 <code>!!</code> 运算子，索引的下标为 0。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #2d9574;">"Steve Buscemi"</span> <span style="color: #7590db;">!!</span> <span style="color: #a45bad;">6</span>
<span style="color: #2d9574;">'B'</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">9.4</span>,<span style="color: #a45bad;">33.2</span>,<span style="color: #a45bad;">96.2</span>,<span style="color: #a45bad;">11.2</span>,<span style="color: #a45bad;">23.25</span><span style="color: #4f97d7;">]</span> <span style="color: #7590db;">!!</span> <span style="color: #a45bad;">1</span>
<span style="color: #a45bad;">33.2</span>
</pre>
</div>

<p>
但你若是试图在一个只含有 4 个元素的 List 中取它的第 6个元素，就会报错。要小心！
</p>

<p>
List 同样也可以用来装 List，甚至是 List 的 List 的 List：
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7; font-weight: bold;">let</span> b <span style="color: #7590db;">=</span> <span style="color: #4f97d7;">[</span><span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">3</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span><span style="color: #bc6ec5;">]</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> b
<span style="color: #4f97d7;">[</span><span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">3</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span><span style="color: #bc6ec5;">]</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> b <span style="color: #7590db;">++</span> <span style="color: #4f97d7;">[</span><span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">1</span><span style="color: #bc6ec5;">]</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">3</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">1</span><span style="color: #bc6ec5;">]</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">6</span><span style="color: #4f97d7;">]</span><span style="color: #ce537a; font-weight: bold;">:</span>b
<span style="color: #4f97d7;">[</span><span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">6</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">3</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span><span style="color: #bc6ec5;">]</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> b <span style="color: #7590db;">!!</span> <span style="color: #a45bad;">2</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
List 中的 List 可以是不同长度，但必须得是相同的型别。如不可以在 List中混合放置字符和数组相同，混合放置数值和字符的 List 也是同样不可以的。当List 内装有可比较的元素时，使用 <code>&gt;</code> 和 <code>&gt;=</code> 可以比较 List的大小。它会先比较第一个元素，若它们的值相等，则比较下一个，以此类推。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span><span style="color: #4f97d7;">]</span> <span style="color: #7590db;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">0</span><span style="color: #4f97d7;">]</span>
<span style="color: #ce537a; font-weight: bold;">True</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span><span style="color: #4f97d7;">]</span> <span style="color: #7590db;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">10</span>,<span style="color: #a45bad;">100</span><span style="color: #4f97d7;">]</span>
<span style="color: #ce537a; font-weight: bold;">True</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">2</span><span style="color: #4f97d7;">]</span> <span style="color: #7590db;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span><span style="color: #4f97d7;">]</span>
<span style="color: #ce537a; font-weight: bold;">True</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">2</span><span style="color: #4f97d7;">]</span> <span style="color: #7590db;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">4</span><span style="color: #4f97d7;">]</span>
<span style="color: #ce537a; font-weight: bold;">True</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">2</span><span style="color: #4f97d7;">]</span> <span style="color: #7590db;">==</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">2</span><span style="color: #4f97d7;">]</span>
<span style="color: #ce537a; font-weight: bold;">True</span>
</pre>
</div>

<p>
还可以对 List 做啥？如下是几个常用的函数:
</p>

<p>
<b>head</b> 返回一个 List 的头部，也就是 List 的首个元素。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> head <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span><span style="color: #4f97d7;">]</span>
<span style="color: #a45bad;">5</span>
</pre>
</div>

<p>
<b>tail</b> 返回一个 List 的尾部，也就是 List 除去头部之后的部分。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> tail <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
<b>last</b> 返回一个 List 的最后一个元素。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> last <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span><span style="color: #4f97d7;">]</span>
<span style="color: #a45bad;">1</span>
</pre>
</div>

<p>
<b>init</b> 返回一个 List 除去最后一个元素的部分。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> init <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">2</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
如果我们把 List 想象为一头怪兽，那这就是它的样子：
</p>


<div class="figure">
<p><img src="listmonster.png" alt="listmonster.png">
</p>
</div>

<p>
试一下，若是取一个空 List 的 <code>head</code> 又会怎样？
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> head <span style="color: #4f97d7; font-weight: bold;">[]</span>
<span style="color: #7590db;">***</span> <span style="color: #ce537a; font-weight: bold;">Exception:</span> Prelude.head<span style="color: #ce537a; font-weight: bold;">:</span> empty list
</pre>
</div>

<p>
糟糕，程序直接跳出错误。如果怪兽都不存在的话，那他的头也不会存在。在使用
<code>head=，=tail=，=last</code> 和 <code>init</code> 时要小心别用到空的 List上，这个错误不会在编译时被捕获。所以说做些工作以防止从空 List中取值会是个好的做法。
</p>

<p>
<b>length</b> 返回一个 List 的长度。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> length <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span><span style="color: #4f97d7;">]</span>
<span style="color: #a45bad;">5</span>
</pre>
</div>

<p>
<b>null</b> 检查一个 List 是否为空。如果是，则返回 <code>True</code> ，否则返回=False= 。应当避免使用 <code>xs == []</code> 之类的语句来判断 List 是否为空，使用 null 会更好。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> null <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span><span style="color: #4f97d7;">]</span>
<span style="color: #ce537a; font-weight: bold;">False</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> null <span style="color: #4f97d7; font-weight: bold;">[]</span>
<span style="color: #ce537a; font-weight: bold;">True</span>
</pre>
</div>

<p>
<b>reverse</b> 将一个 List 反转:
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> reverse <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">5</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
<b>take</b> 返回一个 List 的前几个元素，看：
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> take <span style="color: #a45bad;">3</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">3</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> take <span style="color: #a45bad;">1</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">9</span>,<span style="color: #a45bad;">3</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">3</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> take <span style="color: #a45bad;">5</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> take <span style="color: #a45bad;">0</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">6</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7; font-weight: bold;">[]</span>
</pre>
</div>

<p>
如上，若是图取超过 List 长度的元素个数，只能得到原 List。若 <code>take 0=个元素，则会得到一个空 List！ =drop</code> 与 <code>take</code> 的用法大体相同，它会删除一个 List 中的前几个元素。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> drop <span style="color: #a45bad;">3</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">8</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">6</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">6</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> drop <span style="color: #a45bad;">0</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> drop <span style="color: #a45bad;">100</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7; font-weight: bold;">[]</span>
</pre>
</div>

<p>
<b>maximum</b> 返回一个 List 中最大的那个元素。 <code>minimun</code> 返回最小的。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> minimum <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">8</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">6</span><span style="color: #4f97d7;">]</span>
<span style="color: #a45bad;">1</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> maximum <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">9</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span><span style="color: #4f97d7;">]</span>
<span style="color: #a45bad;">9</span>
</pre>
</div>

<p>
<b>sum</b> 返回一个 List 中所有元素的和。 <code>product</code> 返回一个 List中所有元素的积。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> sum <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">7</span><span style="color: #4f97d7;">]</span>
<span style="color: #a45bad;">31</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> product <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span><span style="color: #4f97d7;">]</span>
<span style="color: #a45bad;">24</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> product <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">7</span>,<span style="color: #a45bad;">9</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">0</span><span style="color: #4f97d7;">]</span>
<span style="color: #a45bad;">0</span>
</pre>
</div>

<p>
<b>elem</b> 判断一个元素是否在包含于一个 List，通常以中缀函数的形式调用它。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #a45bad;">4</span> <span style="color: #7590db;">`elem`</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">6</span><span style="color: #4f97d7;">]</span>
<span style="color: #ce537a; font-weight: bold;">True</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #a45bad;">10</span> <span style="color: #7590db;">`elem`</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">6</span><span style="color: #4f97d7;">]</span>
<span style="color: #ce537a; font-weight: bold;">False</span>
</pre>
</div>

<p>
这就是几个基本的 List 操作函数，我们会在往后的一节中了解更多的函数。
</p>
</div>
</div>

<div id="outline-container-orga91ba72" class="outline-3">
<h3 id="orga91ba72"><span class="section-number-3">1.4</span> 使用 Range</h3>
<div class="outline-text-3" id="text-1-4">

<div class="figure">
<p><img src="cowboy.png" alt="cowboy.png">
</p>
</div>

<p>
今天如果想得到一个包含 1 到 20 之间所有数的 List，你会怎么做? 我们可以将它们一个一个用键盘打出来，但很明显地这不是一个完美的方案，特别是你追求一个好的编程语言的时候。我们想用的是区间(Range)。Range 是构造 List 方法之一，而其中的值必须是可枚举的，像1、2、3、4&#x2026;字符同样也可以枚举，字母表就是 <code>A..Z</code> 所有字符的枚举。而名字就不可以枚举了， =​"john"​= 后面是谁？我不知道。
</p>

<p>
要得到包含 1 到 20 中所有自然数的 List，只要 <code>[1..20]</code> 即可，这与用手写
<code>[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]</code> 是完全等价的。其实用手写一两个还不是什么大事，但若是手写一个非常长的List 那就铁定是个笨方法。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span><span style="color: #7590db;">..</span><span style="color: #a45bad;">20</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">7</span>,<span style="color: #a45bad;">8</span>,<span style="color: #a45bad;">9</span>,<span style="color: #a45bad;">10</span>,<span style="color: #a45bad;">11</span>,<span style="color: #a45bad;">12</span>,<span style="color: #a45bad;">13</span>,<span style="color: #a45bad;">14</span>,<span style="color: #a45bad;">15</span>,<span style="color: #a45bad;">16</span>,<span style="color: #a45bad;">17</span>,<span style="color: #a45bad;">18</span>,<span style="color: #a45bad;">19</span>,<span style="color: #a45bad;">20</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #2d9574;">'a'</span><span style="color: #7590db;">..</span><span style="color: #2d9574;">'z'</span><span style="color: #4f97d7;">]</span>
<span style="color: #2d9574;">"abcdefghijklmnopqrstuvwxyz"</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #2d9574;">'K'</span><span style="color: #7590db;">..</span><span style="color: #2d9574;">'Z'</span><span style="color: #4f97d7;">]</span>
<span style="color: #2d9574;">"KLMNOPQRSTUVWXYZ"</span>
</pre>
</div>

<p>
Range的特点是他还允许你指定每一步该跨多远。譬如说，今天的问题换成是要得到 1到
20 间所有的偶数或者 3 的倍数该怎样？
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">4</span><span style="color: #7590db;">..</span><span style="color: #a45bad;">20</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">8</span>,<span style="color: #a45bad;">10</span>,<span style="color: #a45bad;">12</span>,<span style="color: #a45bad;">14</span>,<span style="color: #a45bad;">16</span>,<span style="color: #a45bad;">18</span>,<span style="color: #a45bad;">20</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">6</span><span style="color: #7590db;">..</span><span style="color: #a45bad;">20</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">9</span>,<span style="color: #a45bad;">12</span>,<span style="color: #a45bad;">15</span>,<span style="color: #a45bad;">18</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
仅需用逗号将前两个元素隔开，再标上上限即可。尽管 Range很聪明，但它恐怕还满足不了一些人对它的期许。你就不能通过 <code>[1,2,4..100]</code> 这样的语句来获得所有 2的幂。一方面是因为步长只能标明一次，另一方面就是仅凭前几项，数组的后项是不能确定的。要得到20 到 1 的 List， <code>[20..1]</code> 是不可以的。必须得 <code>[20,19..1]</code> 。 在 Range
中使用浮点数要格外小心！出于定义的原因，浮点数并不精确。若是使用浮点数的话，你就会得到如下的糟糕结果
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">0.1</span>, <span style="color: #a45bad;">0.3</span> <span style="color: #7590db;">..</span> <span style="color: #a45bad;">1</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">0.1</span>,<span style="color: #a45bad;">0.3</span>,<span style="color: #a45bad;">0.5</span>,<span style="color: #a45bad;">0.7</span>,<span style="color: #a45bad;">0.8999999999999999</span>,<span style="color: #a45bad;">1.0999999999999999</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
我的建议就是避免在 Range 中使用浮点数。
</p>

<p>
你也可以不标明 Range 的上限，从而得到一个无限长度的List。在后面我们会讲解关于无限 List 的更多细节。取前 24 个 13的倍数该怎样？恩，你完全可以
<code>[13,26..24*13]</code> ，但有更好的方法： <code>take 24 [13,26..]</code> 。
</p>

<p>
由于 Haskell 是惰性的，它不会对无限长度的 List求值，否则会没完没了的。它会等着，看你会从它那儿取多少。在这里它见你只要24 个元素，便欣然交差。如下是几个生成无限 List 的函数 <code>cycle</code> 接受一个List 做参数并返回一个无限 List。如果你只是想看一下它的运算结果而已，它会运行个没完的。所以应该在某处划好范围。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> take <span style="color: #a45bad;">10</span> <span style="color: #4f97d7;">(</span>cycle <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span><span style="color: #bc6ec5;">]</span><span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">1</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> take <span style="color: #a45bad;">12</span> <span style="color: #4f97d7;">(</span>cycle <span style="color: #2d9574;">"LOL "</span><span style="color: #4f97d7;">)</span>
<span style="color: #2d9574;">"LOL LOL LOL "</span>
</pre>
</div>

<p>
<b>repeat</b> 接受一个值作参数，并返回一个仅包含该值的无限 List。这与用=cycle= 处理单元素 List 差不多。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> take <span style="color: #a45bad;">10</span> <span style="color: #4f97d7;">(</span>repeat <span style="color: #a45bad;">5</span><span style="color: #4f97d7;">)</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">5</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
其实，你若只是想得到包含相同元素的 List ，使用 <code>replicate</code> 会更简单，如
 <code>replicate 3 10</code> ，得 <code>[10,10,10]</code> 。
</p>
</div>
</div>

<div id="outline-container-org822e13b" class="outline-3">
<h3 id="org822e13b"><span class="section-number-3">1.5</span> List Comprehension</h3>
<div class="outline-text-3" id="text-1-5">

<div class="figure">
<p><img src="kermit.png" alt="kermit.png">
</p>
</div>

<p>
学过数学的你对集合的 comprehension (Set Comprehension)概念一定不会陌生。通过它，可以从既有的集合中按照规则产生一个新集合。前十个偶数的set comprehension可以表示为<img src="setnotation.png" alt="setnotation.png">，竖线左端的部分是输出函数， <code>x</code> 是变量， <code>N</code> 是输入集合。在 Haskell 下，我们可以通过类似 <code>take 10 [2,4..]</code> 的代码来实现。但若是把简单的乘 2改成更复杂的函数操作该怎么办呢？用 list comprehension，它与
set comprehension 十分的相似，用它取前十个偶数轻而易举。这个 list
comprehension 可以表示为：
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span>x<span style="color: #7590db;">*</span><span style="color: #a45bad;">2</span> <span style="color: #7590db;">|</span> x <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span><span style="color: #7590db;">..</span><span style="color: #a45bad;">10</span><span style="color: #bc6ec5;">]</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">8</span>,<span style="color: #a45bad;">10</span>,<span style="color: #a45bad;">12</span>,<span style="color: #a45bad;">14</span>,<span style="color: #a45bad;">16</span>,<span style="color: #a45bad;">18</span>,<span style="color: #a45bad;">20</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
如你所见，结果正确。给这个 comprehension 再添个限制条件(predicate)，它与前面的条件由一个逗号分隔。在这里，我们要求只取乘以 2后大于等于 12 的元素。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span>x<span style="color: #7590db;">*</span><span style="color: #a45bad;">2</span> <span style="color: #7590db;">|</span> x <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span><span style="color: #7590db;">..</span><span style="color: #a45bad;">10</span><span style="color: #bc6ec5;">]</span>, x<span style="color: #7590db;">*</span><span style="color: #a45bad;">2</span> <span style="color: #7590db;">&gt;=</span> <span style="color: #a45bad;">12</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">12</span>,<span style="color: #a45bad;">14</span>,<span style="color: #a45bad;">16</span>,<span style="color: #a45bad;">18</span>,<span style="color: #a45bad;">20</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
cool，灵了。若是取 50 到 100 间所有除7的余数为 3 的元素该怎么办？简单：
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span> x <span style="color: #7590db;">|</span> x <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">50</span><span style="color: #7590db;">..</span><span style="color: #a45bad;">100</span><span style="color: #bc6ec5;">]</span>, x <span style="color: #7590db;">`mod`</span> <span style="color: #a45bad;">7</span> <span style="color: #7590db;">==</span> <span style="color: #a45bad;">3</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">52</span>,<span style="color: #a45bad;">59</span>,<span style="color: #a45bad;">66</span>,<span style="color: #a45bad;">73</span>,<span style="color: #a45bad;">80</span>,<span style="color: #a45bad;">87</span>,<span style="color: #a45bad;">94</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
成功！从一个 List 中筛选出符合特定限制条件的操作也可以称为过滤(filtering)。即取一组数并且按照一定的限制条件过滤它们。再举个例子吧，假如我们想要一个
comprehension，它能够使 List 中所有大于 10的奇数变为 =​"BANG"​= ，小于 10 的奇数变为 =​"BOOM"​= ，其他则统统扔掉。方便重用起见，我们将这个 comprehension置于一个函数之中。
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #bc6ec5; font-weight: bold;">boomBangs</span> xs <span style="color: #7590db;">=</span> <span style="color: #4f97d7;">[</span> <span style="color: #4f97d7; font-weight: bold;">if</span> x <span style="color: #7590db;">&lt;</span> <span style="color: #a45bad;">10</span> <span style="color: #4f97d7; font-weight: bold;">then</span> <span style="color: #2d9574;">"BOOM!"</span> <span style="color: #4f97d7; font-weight: bold;">else</span> <span style="color: #2d9574;">"BANG!"</span> <span style="color: #7590db;">|</span> x <span style="color: #7590db;">&lt;-</span> xs, odd x<span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
这个 comprehension 的最后部分就是限制条件，使用 <code>odd</code> 函数判断是否为奇数：返回 <code>True</code> ，就是奇数，该 List 中的元素才被包含。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> boomBangs <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">7</span><span style="color: #7590db;">..</span><span style="color: #a45bad;">13</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #2d9574;">"BOOM!"</span>,<span style="color: #2d9574;">"BOOM!"</span>,<span style="color: #2d9574;">"BANG!"</span>,<span style="color: #2d9574;">"BANG!"</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
也可以加多个限制条件。若要达到 10 到 20 间所有不等于 13，15 或 19的数，可以这样：
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span> x <span style="color: #7590db;">|</span> x <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">10</span><span style="color: #7590db;">..</span><span style="color: #a45bad;">20</span><span style="color: #bc6ec5;">]</span>, x <span style="color: #7590db;">/=</span> <span style="color: #a45bad;">13</span>, x <span style="color: #7590db;">/=</span> <span style="color: #a45bad;">15</span>, x <span style="color: #7590db;">/=</span> <span style="color: #a45bad;">19</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">10</span>,<span style="color: #a45bad;">11</span>,<span style="color: #a45bad;">12</span>,<span style="color: #a45bad;">14</span>,<span style="color: #a45bad;">16</span>,<span style="color: #a45bad;">17</span>,<span style="color: #a45bad;">18</span>,<span style="color: #a45bad;">20</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
除了多个限制条件之外，从多个 List 中取元素也是可以的。这样的话comprehension
会把所有的元素组合交付给我们的输出函数。在不过滤的前提下，取自两个长度为 4 的集合的 comprehension 会产生一个长度为 16 的List。假设有两个 List， <code>[2,5,10]</code>
和 <code>[8,10,11]</code> ，要取它们所有组合的积，可以这样：
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span> x<span style="color: #7590db;">*</span>y <span style="color: #7590db;">|</span> x <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">10</span><span style="color: #bc6ec5;">]</span>, y <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">8</span>,<span style="color: #a45bad;">10</span>,<span style="color: #a45bad;">11</span><span style="color: #bc6ec5;">]</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">16</span>,<span style="color: #a45bad;">20</span>,<span style="color: #a45bad;">22</span>,<span style="color: #a45bad;">40</span>,<span style="color: #a45bad;">50</span>,<span style="color: #a45bad;">55</span>,<span style="color: #a45bad;">80</span>,<span style="color: #a45bad;">100</span>,<span style="color: #a45bad;">110</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
意料之中，得到的新 List 长度为 9。若只取乘积大于 50 的结果该如何？
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span> x<span style="color: #7590db;">*</span>y <span style="color: #7590db;">|</span> x <span style="color: #7590db;">&lt;-</span><span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">10</span><span style="color: #bc6ec5;">]</span>, y <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">8</span>,<span style="color: #a45bad;">10</span>,<span style="color: #a45bad;">11</span><span style="color: #bc6ec5;">]</span>, x<span style="color: #7590db;">*</span>y <span style="color: #7590db;">&gt;</span> <span style="color: #a45bad;">50</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #a45bad;">55</span>,<span style="color: #a45bad;">80</span>,<span style="color: #a45bad;">100</span>,<span style="color: #a45bad;">110</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
取个包含一组名词和形容词的 List comprehension 吧，写诗的话也许用得着。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7; font-weight: bold;">let</span> nouns <span style="color: #7590db;">=</span> <span style="color: #4f97d7;">[</span><span style="color: #2d9574;">"hobo"</span>,<span style="color: #2d9574;">"frog"</span>,<span style="color: #2d9574;">"pope"</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7; font-weight: bold;">let</span> adjectives <span style="color: #7590db;">=</span> <span style="color: #4f97d7;">[</span><span style="color: #2d9574;">"lazy"</span>,<span style="color: #2d9574;">"grouchy"</span>,<span style="color: #2d9574;">"scheming"</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span>adjective <span style="color: #7590db;">++</span> <span style="color: #2d9574;">" "</span> <span style="color: #7590db;">++</span> noun <span style="color: #7590db;">|</span> adjective <span style="color: #7590db;">&lt;-</span> adjectives, noun <span style="color: #7590db;">&lt;-</span> nouns<span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #2d9574;">"lazy hobo"</span>,<span style="color: #2d9574;">"lazy frog"</span>,<span style="color: #2d9574;">"lazy pope"</span>,<span style="color: #2d9574;">"grouchy hobo"</span>,<span style="color: #2d9574;">"grouchy frog"</span>, <span style="color: #2d9574;">"grouchy pope"</span>,<span style="color: #2d9574;">"scheming hobo"</span>,
<span style="color: #2d9574;">"scheming frog"</span>,<span style="color: #2d9574;">"scheming pope"</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
明白！让我们编写自己的 <code>length</code> 函数吧！就叫做 <code>length'​</code> !
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #bc6ec5; font-weight: bold;">length'</span> xs <span style="color: #7590db;">=</span> sum <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span> <span style="color: #7590db;">|</span> <span style="color: #4f97d7; font-weight: bold;">_</span> <span style="color: #7590db;">&lt;-</span> xs<span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
<code>_</code> 表示我们并不关心从 List中取什么值，与其弄个永远不用的变量，不如直接一个
=_=。这个函数将一个List 中所有元素置换为 1，并且使其相加求和。得到的结果便是我们的 List长度。友情提示：字串也是 List，完全可以使用 list comprehension来处理字串。如下是个除去字串中所有非大写字母的函数：
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #bc6ec5; font-weight: bold;">removeNonUppercase</span> st <span style="color: #7590db;">=</span> <span style="color: #4f97d7;">[</span> c <span style="color: #7590db;">|</span> c <span style="color: #7590db;">&lt;-</span> st, c <span style="color: #7590db;">`elem`</span> <span style="color: #bc6ec5;">[</span><span style="color: #2d9574;">'A'</span><span style="color: #7590db;">..</span><span style="color: #2d9574;">'Z'</span><span style="color: #bc6ec5;">]</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
测试一下：
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> removeNonUppercase <span style="color: #2d9574;">"Hahaha! Ahahaha!"</span>
<span style="color: #2d9574;">"HA"</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> removeNonUppercase <span style="color: #2d9574;">"IdontLIKEFROGS"</span>
<span style="color: #2d9574;">"ILIKEFROGS"</span>
</pre>
</div>

<p>
在这里，限制条件做了所有的工作。它说：只有在 <code>['A'..'Z']</code> 之间的字符才可以被包含。
</p>

<p>
若操作含有 List 的 List，使用嵌套的 List comprehension也是可以的。假设有个包含许多数值的 List 的List，让我们在不拆开它的前提下除去其中的所有奇数：
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7; font-weight: bold;">let</span> xxs <span style="color: #7590db;">=</span> <span style="color: #4f97d7;">[</span><span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">5</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">7</span>,<span style="color: #a45bad;">8</span>,<span style="color: #a45bad;">9</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">6</span><span style="color: #bc6ec5;">]</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7;">[</span> <span style="color: #bc6ec5;">[</span> x <span style="color: #7590db;">|</span> x <span style="color: #7590db;">&lt;-</span> xs, even x <span style="color: #bc6ec5;">]</span> <span style="color: #7590db;">|</span> xs <span style="color: #7590db;">&lt;-</span> xxs<span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">4</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">8</span><span style="color: #bc6ec5;">]</span>,<span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">6</span><span style="color: #bc6ec5;">]</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
将 List Comprehension 分成多行也是可以的。若非在 ghci 之下，还是将 List
Comprehension 分成多行好，尤其是需要嵌套的时候。
</p>
</div>
</div>

<div id="outline-container-orgba2eb3b" class="outline-3">
<h3 id="orgba2eb3b"><span class="section-number-3">1.6</span> Tuple</h3>
<div class="outline-text-3" id="text-1-6">

<div class="figure">
<p><img src="tuple.png" alt="tuple.png">
</p>
</div>

<p>
从某种意义上讲，Tuple (元组)很像 List &#x2013;都是将多个值存入一个个体的容器。但它们却有着本质的不同，一组数字的List 就是一组数字，它们的型别相同，且不关心其中包含元素的数量。而 Tuple则要求你对需要组合的数据的数目非常的明确，它的型别取决于其中项的数目与其各自的型别。Tuple中的项由括号括起，并由逗号隔开。
</p>

<p>
另外的不同之处就是 Tuple 中的项不必为同一型别，在 Tuple里可以存入多态别项的组合。
</p>

<p>
动脑筋，在 Haskell 中表示二维矢量该如何？使用 List是一种方法，它倒也工作良好。若要将一组矢量置于一个 List中来表示平面图形又该怎样？我们可以写类似
<code>[[1,2],[8,11],[4,5]]</code> 的代码来实现。但问题在于， <code>[[1,2],[8,11,5],[4,5]]</code> 也是同样合法的，因为其中元素的型别都相同。尽管这样并不靠谱，但编译时并不会报错。然而一个长度为2 的 Tuple (也可以称作序对，Pair)，是一个独立的类型，这便意味着一个包含一组序对的 List不能再加入一个三元组，所以说把原先的方括号改为圆括号使用 Tuple 会 更好: <code>[(1,2),(8,11),(4,5)]</code> 。若试图表示这样的图形：
<code>[(1,2),(8,11,5),(4,5)]</code> ，就会报出以下的错误：
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #ce537a; font-weight: bold;">Couldn't</span> match expected <span style="color: #4f97d7; font-weight: bold;">type</span> `<span style="color: #4f97d7;">(</span>t, t1<span style="color: #4f97d7;">)</span>'
<span style="color: #bc6ec5; font-weight: bold;">against</span> inferred <span style="color: #4f97d7; font-weight: bold;">type</span> `<span style="color: #4f97d7;">(</span>t2, t3, t4<span style="color: #4f97d7;">)</span>'
<span style="color: #ce537a; font-weight: bold;">In</span> the expression<span style="color: #ce537a; font-weight: bold;">:</span> <span style="color: #4f97d7;">(</span><span style="color: #a45bad;">8</span>, <span style="color: #a45bad;">11</span>, <span style="color: #a45bad;">5</span><span style="color: #4f97d7;">)</span>
<span style="color: #ce537a; font-weight: bold;">In</span> the expression<span style="color: #ce537a; font-weight: bold;">:</span> <span style="color: #4f97d7;">[</span><span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">1</span>, <span style="color: #a45bad;">2</span><span style="color: #bc6ec5;">)</span>, <span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">8</span>, <span style="color: #a45bad;">11</span>, <span style="color: #a45bad;">5</span><span style="color: #bc6ec5;">)</span>, <span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">4</span>, <span style="color: #a45bad;">5</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">]</span>
<span style="color: #ce537a; font-weight: bold;">In</span> the definition <span style="color: #4f97d7; font-weight: bold;">of</span> `it'<span style="color: #ce537a; font-weight: bold;">:</span> it <span style="color: #7590db;">=</span> <span style="color: #4f97d7;">[</span><span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">1</span>, <span style="color: #a45bad;">2</span><span style="color: #bc6ec5;">)</span>, <span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">8</span>, <span style="color: #a45bad;">11</span>, <span style="color: #a45bad;">5</span><span style="color: #bc6ec5;">)</span>, <span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">4</span>, <span style="color: #a45bad;">5</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
这告诉我们说程序在试图将序对和三元组置于同一 List中，而这是不允许的。同样
<code>[(1,2),("one",2)]</code> 这样的 List 也不行，因为其中的第一个 Tuple 是一对数字，而第二个 Tuple却成了一个字串和一个数字。Tuple可以用来保存多个数据，如，我们要表示一个人的名字与年 龄，可以使用这样的Tuple: <code>("Christopher", "Walken", 55)</code>
。从这个例子里也可以看出，Tuple中也可以存储 List。
</p>

<p>
使用 Tuple 前应当事先明确一条数据中应该由多少个项。每个不同长度的 Tuple都是独立的型别，所以你就不可以写个函数来给它追加元素。而唯一能做的，就是通过函数来给一个List 追加序对，三元组或是四元组等内容。
</p>

<p>
可以有单元素的 List，但 Tuple 不行。想想看，单元素的 Tuple本身就只有一个值，对我们又有啥意义？不靠谱。
</p>

<p>
同 List 相同，只要其中的项是可比较的，Tuple也可以比较大小，只是你不可以像比较不同长度的 List 那样比较不同长度的Tuple 。如下是两个有用的序对操作函数：
</p>

<p>
<b>fst</b> 返回一个序对的首项。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> fst <span style="color: #4f97d7;">(</span><span style="color: #a45bad;">8</span>,<span style="color: #a45bad;">11</span><span style="color: #4f97d7;">)</span>
<span style="color: #a45bad;">8</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> fst <span style="color: #4f97d7;">(</span><span style="color: #2d9574;">"Wow"</span>, <span style="color: #ce537a; font-weight: bold;">False</span><span style="color: #4f97d7;">)</span>
<span style="color: #2d9574;">"Wow"</span>
</pre>
</div>

<p>
<b>snd</b> 返回序对的尾项。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> snd <span style="color: #4f97d7;">(</span><span style="color: #a45bad;">8</span>,<span style="color: #a45bad;">11</span><span style="color: #4f97d7;">)</span>
<span style="color: #a45bad;">11</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> snd <span style="color: #4f97d7;">(</span><span style="color: #2d9574;">"Wow"</span>, <span style="color: #ce537a; font-weight: bold;">False</span><span style="color: #4f97d7;">)</span>
<span style="color: #ce537a; font-weight: bold;">False</span>
</pre>
</div>

<pre class="example">
*Note*：这两个函数仅对序对有效，而不能应用于三元组，四元组和五元组之上。稍后，我们将过一遍从 Tuple 中取数据的所有方式。
</pre>

<p>
有个函数很 cool，它就是 =zip=。它可以用来生成一组序对 (Pair) 的List。它取两个
List，然后将它们交叉配对，形成一组序对的List。它很简单，却很实用，尤其是你需要组合或是遍历两个 List时。如下是个例子：
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> zip <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">5</span><span style="color: #4f97d7;">]</span> <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">5</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">1</span>,<span style="color: #a45bad;">5</span><span style="color: #bc6ec5;">)</span>,<span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">5</span><span style="color: #bc6ec5;">)</span>,<span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">5</span><span style="color: #bc6ec5;">)</span>,<span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">5</span><span style="color: #bc6ec5;">)</span>,<span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">5</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> zip <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span> <span style="color: #7590db;">..</span> <span style="color: #a45bad;">5</span><span style="color: #4f97d7;">]</span> <span style="color: #4f97d7;">[</span><span style="color: #2d9574;">"one"</span>, <span style="color: #2d9574;">"two"</span>, <span style="color: #2d9574;">"three"</span>, <span style="color: #2d9574;">"four"</span>, <span style="color: #2d9574;">"five"</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">1</span>,<span style="color: #2d9574;">"one"</span><span style="color: #bc6ec5;">)</span>,<span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">2</span>,<span style="color: #2d9574;">"two"</span><span style="color: #bc6ec5;">)</span>,<span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">3</span>,<span style="color: #2d9574;">"three"</span><span style="color: #bc6ec5;">)</span>,<span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">4</span>,<span style="color: #2d9574;">"four"</span><span style="color: #bc6ec5;">)</span>,<span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">5</span>,<span style="color: #2d9574;">"five"</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
它把元素配对并返回一个新的List。第一个元素配第一个，第二个元素配第二个..以此类推。注意，由于序对中可以含有不同的型别，=zip=函数可能会将不同型别的序对组合在一起。若是两个不同长度的 List 会怎么样？
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> zip <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">3</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">7</span>,<span style="color: #a45bad;">2</span>,<span style="color: #a45bad;">5</span>,<span style="color: #a45bad;">4</span>,<span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">6</span><span style="color: #4f97d7;">]</span> <span style="color: #4f97d7;">[</span><span style="color: #2d9574;">"im"</span>,<span style="color: #2d9574;">"a"</span>,<span style="color: #2d9574;">"turtle"</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">5</span>,<span style="color: #2d9574;">"im"</span><span style="color: #bc6ec5;">)</span>,<span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">3</span>,<span style="color: #2d9574;">"a"</span><span style="color: #bc6ec5;">)</span>,<span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">2</span>,<span style="color: #2d9574;">"turtle"</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
较长的那个会在中间断开，去匹配较短的那个。由于 Haskell 是惰性的，使用=zip= 同时处理有限和无限的 List 也是可以的：
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> zip <span style="color: #4f97d7;">[</span><span style="color: #a45bad;">1</span><span style="color: #7590db;">..</span><span style="color: #4f97d7;">]</span> <span style="color: #4f97d7;">[</span><span style="color: #2d9574;">"apple"</span>, <span style="color: #2d9574;">"orange"</span>, <span style="color: #2d9574;">"cherry"</span>, <span style="color: #2d9574;">"mango"</span><span style="color: #4f97d7;">]</span>
<span style="color: #4f97d7;">[</span><span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">1</span>,<span style="color: #2d9574;">"apple"</span><span style="color: #bc6ec5;">)</span>,<span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">2</span>,<span style="color: #2d9574;">"orange"</span><span style="color: #bc6ec5;">)</span>,<span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">3</span>,<span style="color: #2d9574;">"cherry"</span><span style="color: #bc6ec5;">)</span>,<span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">4</span>,<span style="color: #2d9574;">"mango"</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
接下来考虑一个同时应用到 List 和 Tuple的问题：如何取得所有三边长度皆为整数且小于等于 10，周长为 24的直角三角形？首先，把所有三遍长度小于等于 10 的三角形都列出来：
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7; font-weight: bold;">let</span> triangles <span style="color: #7590db;">=</span> <span style="color: #4f97d7;">[</span> <span style="color: #bc6ec5;">(</span>a,b,c<span style="color: #bc6ec5;">)</span> <span style="color: #7590db;">|</span> c <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span><span style="color: #7590db;">..</span><span style="color: #a45bad;">10</span><span style="color: #bc6ec5;">]</span>, b <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span><span style="color: #7590db;">..</span><span style="color: #a45bad;">10</span><span style="color: #bc6ec5;">]</span>, a <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span><span style="color: #7590db;">..</span><span style="color: #a45bad;">10</span><span style="color: #bc6ec5;">]</span> <span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
刚才我们是从三个 List中取值，并且通过输出函数将其组合为一个三元组。只要在
ghci 下边调用triangle，你就会得到所有三边都小于等于 10的三角形。我们接下来给它添加一个限制条件，令其必须为直角三角形。同时也考虑上 <code>b</code> 边要短于斜边， <code>a</code>
边要短于 <code>b</code> 边情况：
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7; font-weight: bold;">let</span> rightTriangles <span style="color: #7590db;">=</span> <span style="color: #4f97d7;">[</span> <span style="color: #bc6ec5;">(</span>a,b,c<span style="color: #bc6ec5;">)</span> <span style="color: #7590db;">|</span> c <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span><span style="color: #7590db;">..</span><span style="color: #a45bad;">10</span><span style="color: #bc6ec5;">]</span>, b <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span><span style="color: #7590db;">..</span>c<span style="color: #bc6ec5;">]</span>, a <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span><span style="color: #7590db;">..</span>b<span style="color: #bc6ec5;">]</span>, a<span style="color: #7590db;">^</span><span style="color: #a45bad;">2</span> <span style="color: #7590db;">+</span> b<span style="color: #7590db;">^</span><span style="color: #a45bad;">2</span> <span style="color: #7590db;">==</span> c<span style="color: #7590db;">^</span><span style="color: #a45bad;">2</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
已经差不多了。最后修改函数，告诉它只要周长为 24 的三角形。
</p>

<div class="org-src-container">
<pre class="src src-haskell">ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> <span style="color: #4f97d7; font-weight: bold;">let</span> rightTriangles' <span style="color: #7590db;">=</span> <span style="color: #4f97d7;">[</span> <span style="color: #bc6ec5;">(</span>a,b,c<span style="color: #bc6ec5;">)</span> <span style="color: #7590db;">|</span> c <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span><span style="color: #7590db;">..</span><span style="color: #a45bad;">10</span><span style="color: #bc6ec5;">]</span>, b <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span><span style="color: #7590db;">..</span>c<span style="color: #bc6ec5;">]</span>, a <span style="color: #7590db;">&lt;-</span> <span style="color: #bc6ec5;">[</span><span style="color: #a45bad;">1</span><span style="color: #7590db;">..</span>b<span style="color: #bc6ec5;">]</span>, a<span style="color: #7590db;">^</span><span style="color: #a45bad;">2</span> <span style="color: #7590db;">+</span> b<span style="color: #7590db;">^</span><span style="color: #a45bad;">2</span> <span style="color: #7590db;">==</span> c<span style="color: #7590db;">^</span><span style="color: #a45bad;">2</span>, a<span style="color: #7590db;">+</span>b<span style="color: #7590db;">+</span>c <span style="color: #7590db;">==</span> <span style="color: #a45bad;">24</span><span style="color: #4f97d7;">]</span>
ghci<span style="color: #bc6ec5; font-weight: bold;">&gt;</span> rightTriangles'
<span style="color: #4f97d7;">[</span><span style="color: #bc6ec5;">(</span><span style="color: #a45bad;">6</span>,<span style="color: #a45bad;">8</span>,<span style="color: #a45bad;">10</span><span style="color: #bc6ec5;">)</span><span style="color: #4f97d7;">]</span>
</pre>
</div>

<p>
得到正确结果！这便是函数式编程语言的一般思路：先取一个初始的集合并将其变形，执行过滤条件，最终取得正确的结果。
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: 刘向</p>
<p class="date">Created: 2019-12-12 四 13:31</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
